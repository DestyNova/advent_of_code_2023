import util.

main =>
  Res = read_file_lines().map(process),
  println(sum(Res)).

process(S) = R =>
  Ns = S.split().map(parse_term).reverse(),
  extrapolate(Ns,Diff),
  R = Ns[Ns.len] + Diff.

extrapolate(Ns,R) :-
  Ns.new_set().keys == [0],
  R = 0.

extrapolate(Ns,R) :-
  Diffs = [B-A : {A,B} in zip(Ns, Ns.tail)],
  extrapolate(Diffs, Next),
  R = Diffs[Diffs.len] + Next.
